---
import Layout from '../../layouts/Layout.astro';

const { slug } = Astro.params;

let res = await fetch(`https://wordpress.alanakra.fr/wp-json/wp/v2/posts?slug=${slug}`)
let [post] = await res.json();
console.log(slug, post)

export async function getStaticPaths() {
    let data = await fetch("https://wordpress.alanakra.fr/wp-json/wp/v2/posts")
    let posts = await data.json();

    return posts.map((post) => ({
        params: { slug: post.slug },
        props: { post: post },
    }));
}
---